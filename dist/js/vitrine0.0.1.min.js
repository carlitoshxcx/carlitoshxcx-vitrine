/**
 * vitrine - Vitrine - Recomendação de Produtos
 * @author Carlos Eduardo Gomes <carlitoshxcx@gmail.com>
 * @link https://github.com/carlitoshxcx/vitrine/
 * @version v0.0.1
 */
(function(){"use strict";var e=this;e.ready=!1;var n=function(){this.getJSONP()};e.init=n;var i=function(n){return e.ready=!0,e.data=n.data,data};e.X=i;var r=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!1,e.src="js/challenge.json?callback=X";var n=document.getElementsByTagName("body")[0].children[1];n.parentNode.insertBefore(e,n)};e.getJSONP=r;e.loadData=function(){var n=setInterval(function(){e.ready&&(clearInterval(n),e.create())},100)}();var c=function(){this.fillProduct("reference",e.data.reference.item),this.fillProduct("recommendation",e.data.recommendation)};e.create=c;var d=function(e,n){if(void 0===n.length){var i=document.getElementsByClassName("reference")[0].children[1].children[0];void 0===n.businessId?i.id="":i.id=n.businessId,void 0===n.imageName?i.children[0].children[0].children[0].src="":i.children[0].children[0].children[0].src=n.imageName,void 0===n.name?i.children[0].children[1].innerText="":i.children[0].children[1].innerText=n.name,null===n.oldPrice?(i.children[0].children[2].children[0].innerHTML="",i.children[0].children[2].children[1].innerHTML=""):(i.children[0].children[2].children[0].innerText="De: ",i.children[0].children[2].children[1].innerText=n.oldPrice),void 0===n.price?(i.children[0].children[3].children[0].innerText="",i.children[0].children[3].children[1].innerText=""):(i.children[0].children[3].children[0].innerText="Por: ",i.children[0].children[3].children[1].innerText=n.price),void 0===n.productInfo.paymentConditions?i.children[0].children[4].innerHTML="":i.children[0].children[4].innerHTML=n.productInfo.paymentConditions,i.parentNode.className=i.parentNode.className+" show"}else{for(var r=[],i=document.getElementsByClassName("recommendation")[0].children[1].children[0].children[2].children[0],c=i,d=n.length-1;d>=0;d--)c=document.getElementsByClassName("recommendation")[0].children[1].children[0].children[2].children[0],void 0===n[d].businessId?c.id="":c.id=n[d].businessId,void 0===n[d].imageName?c.children[0].children[0].children[0].src="":c.children[0].children[0].children[0].src=n[d].imageName,void 0===n[d].name?c.children[0].children[1].innerText="":c.children[0].children[1].innerText=n[d].name,null===n[d].oldPrice?(c.children[0].children[2].children[0].innerText="",c.children[0].children[2].children[1].innerText=""):(c.children[0].children[2].children[0].innerText="De: ",c.children[0].children[2].children[1].innerText=n[d].oldPrice),void 0===n[d].price?(c.children[0].children[3].children[0].innerText="",c.children[0].children[3].children[1].innerText=""):(c.children[0].children[3].children[0].innerText="Por: ",c.children[0].children[3].children[1].innerText=n[d].price),void 0===n[d].productInfo.paymentConditions?c.children[0].children[4].innerHTML="":c.children[0].children[4].innerHTML=n[d].productInfo.paymentConditions,r+=c.parentNode.innerHTML;var l=document.getElementsByClassName("recommendation")[0].children[1].children[0].children[2];l.innerHTML=r,l.className=l.className+" show",this.slider(l.parentNode)}};e.fillProduct=d;var l=function(e){var n="0px",i=(Math.round(e.children[2].clientWidth/e.clientWidth),e.clientWidth,e.clientWidth),r=0,c=0,d=0,l=0,t=0,h=(e.children[2].clientWidth,e.children[2].children[0].clientWidth),a=e.children[1].clientWidth,o=e.children[3].clientWidth;i-=a,i-=o,d=i/h,l=Math.floor(d),t=Math.round(d),r=l*h,"arrow-left"==e.children[1].className&&(e.children[1].onclick=function(i){c==l?c=0:c++,n=0===c?a+"px;":"-"+(e.children[2].clientWidth-c*r-a)+"px;",e.children[2].style="left: "+n}),"arrow-right"==e.children[3].className&&(e.children[3].onclick=function(){c==l?c=0:c++,n=0===c?a+"px;":"-"+(e.children[2].clientWidth-(t-c)*r-a)+"px;",e.children[2].style="left: "+n})};e.slider=l,e.init()}).call(this);