/** * vitrine - Vitrine - Recomendação de Produtos * @author Carlos Eduardo Gomes<carlitoshxcx @gmail.com>* @link https://github.com/carlitoshxcx/vitrine/ * @version v0.0.1 */ (function(){"use strict";var e=this;e.ready=!1;var n=function(){this.getJSONP()};e.init=n;var i=function(n){return e.ready=!0,e.data=n.data,data};e.X=i;var r=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!1,e.src="http://roberval.chaordicsystems.com/challenge/challenge.json?callback=X";var n=document.getElementsByTagName("body")[0].children[1];n.parentNode.insertBefore(e,n)};e.getJSONP=r;e.loadData=function(){var n=setInterval(function(){e.ready&&(clearInterval(n),e.create())},100)}();var c=function(){this.fillProduct("reference",e.data.reference.item),this.fillProduct("recommendation",e.data.recommendation)};e.create=c;var d=function(e,n){if(void 0===n.length){var i=document.getElementsByClassName("reference")[0].children[1].children[0];void 0===n.businessId?i.id="":i.id=n.businessId,void 0===n.imageName?i.children[0].children[0].children[0].src="":i.children[0].children[0].children[0].src=n.imageName,void 0===n.name?i.children[0].children[1].innerText="":i.children[0].children[1].innerText=n.name,void 0===n.oldPrice?i.children[0].children[2].children[0].innerText="":i.children[0].children[2].children[0].innerText=n.oldPrice,void 0===n.price?i.children[0].children[3].children[0].innerText="":i.children[0].children[3].children[0].innerText=n.price,void 0===n.productInfo.paymentConditions?i.children[0].children[4].innerText="":i.children[0].children[4].innerText=n.productInfo.paymentConditions,i.parentNode.className=i.parentNode.className+" show"}else{for(var r=[],c=n.length-1;c>=0;c--){var i=document.getElementsByClassName("recommendation")[0].children[1].children[0].children[2].children[0];void 0===n[c].businessId?i.id="":i.id=n[c].businessId,void 0===n[c].imageName?i.children[0].children[0].children[0].src="":i.children[0].children[0].children[0].src=n[c].imageName,void 0===n[c].name?i.children[0].children[1].innerText="":i.children[0].children[1].innerText=n[c].name,void 0===n[c].oldPrice?i.children[0].children[2].children[0].innerText="":i.children[0].children[2].children[0].innerText=n[c].oldPrice,void 0===n[c].price?i.children[0].children[3].children[0].innerText="":i.children[0].children[3].children[0].innerText=n[c].price,void 0===n[c].productInfo.paymentConditions?i.children[0].children[4].innerText="":i.children[0].children[4].innerText=n[c].productInfo.paymentConditions,r+=i.parentNode.innerHTML}var d=document.getElementsByClassName("recommendation")[0].children[1].children[0].children[2];d.innerHTML=r,d.className=d.className+" show",this.slider(d.parentNode)}};e.fillProduct=d;var l=function(e){var n=Math.round(e.children[2].clientWidth/e.clientWidth),i=0,r=0;e.clientWidth;"arrow-left"==e.children[1].className&&(e.children[1].onclick=function(n){i+=1,0===r?(r=2,i=-2):r--,e.children[2].style="left: "+(e.clientWidth*i+25)+"px;"}),"arrow-right"==e.children[3].className&&(e.children[3].onclick=function(){i-=1,r==n-1?(r=0,i=0):r++,e.children[2].style="left: "+(e.clientWidth*i+25)+"px;"})};e.slider=l,e.init()}).call(this);</carlitoshxcx>